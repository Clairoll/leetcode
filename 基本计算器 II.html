<!--
 * @Autor: Clairoll
 * @Date: 2021-03-11 16:24:40
 * @LastEditTime: 2021-03-12 10:52:27
 * @Email: 1755033445@qq.com
 * @description: 
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    //     给你一个字符串表达式 s ，请你实现一个基本计算器来计算并返回它的值。

    // 整数除法仅保留整数部分。

    //  

    // 示例 1：

    // 输入：s = "3+2*2"
    // 输出：7
    // 示例 2：

    // 输入：s = " 3/2 "
    // 输出：1
    // 示例 3：

    // 输入：s = " 3+5 / 2 "
    // 输出：5
    //  

    // 提示：

    // 1 <= s.length <= 3 * 105
    // s 由整数和算符 ('+', '-', '*', '/') 组成，中间由一些空格隔开
    // s 表示一个 有效表达式
    // 表达式中的所有整数都是非负整数，且在范围 [0, 231 - 1] 内
    // 题目数据保证答案是一个 32-bit 整数
    /**
     * @param {string} s
     * @return {number}
     */
    var calculate = function (s) {

      let arr = []
      let preSign = '+'
      let cur = 0
      s = s + '+'
      for (let i = 0; i < s.length; i++) {
        if (s[i] >= '0' && s[i] <= '9') { // 数字
          cur = cur * 10 + Number(s[i])
        } else if (s[i] == ' ') {
          continue
        } else {
          if (preSign == '+') arr.push(cur)
          if (preSign == '-') arr.push(-1 * cur)
          if (preSign == '*') arr.push(arr.pop() * cur)
          if (preSign == '/') arr.push(arr.pop() / cur | 0)
          cur = 0
          preSign = s[i]
        }
      }

      let res = 0
      arr.map(item => {
        res += item
      })

      return res
    };

    console.log(calculate(" 3+5 / 2 "))
  </script>
</body>

</html>