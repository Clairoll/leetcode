<!--
 * @Autor: Clairoll
 * @Date: 2021-01-26 16:44:19
 * @LastEditTime: 2021-01-28 10:55:24
 * @Email: 1755033445@qq.com
 * @description: 
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // 给定一个可包含重复数字的序列 nums ，按任意顺序 返回所有不重复的全排列。

    // 示例 1：

    // 输入：nums = [1,1,2]
    // 输出：
    // [[1,1,2],
    //  [1,2,1],
    //  [2,1,1]]
    // 示例 2：

    // 输入：nums = [1,2,3]
    // 输出：[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
    /**
     * @param {number[]} nums
     * @return {number[][]}
     */
    var permuteUnique = function (nums) {
      let res = []
      let len = nums.length
      let used = Array(len).fill(false) // 用来存储是否使用过
      nums.sort((a, b) => a - b)
      const dfn = function (index, arr) {
        if (index == len) {
          res.push([...arr])
          return
        }

        for (let i = 0; i < len; ++i) {
          // 使用过相同元素使用过跳过
          if (used[i] || (i > 0 && nums[i] === nums[i - 1] && used[i - 1])) {
            continue;
          }
          arr.push(nums[i])
          used[i] = true
          dfn(index + 1, arr)
          used[i] = false
          arr.pop()
        }
      }

      dfn(0, [])
      return res
    };
    console.log(permuteUnique([1, 1, 2]))
  </script>
</body>

</html>